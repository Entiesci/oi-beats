# 差分约束算法

对于$ xj​−xi​≤k$，我们会发现它类似最短路网络中的三角不等式 $d_v​−d_u​≤w_{<u,v>}$，其中$d_u$是从源点到u的最短距离，默认$d_v>d_u$​，那是否可以通过最短路的形式解决呢？

显然是可以的，对于每一个不等式$x_i-x_j≤w_k$，连边$i-j$，权值为$w_k$。

然后跑一遍最短路，此时最短路的答案 $d_i​$ 也正是原不等式组的一个解 $x_i​$。



## **例题 #1**

给出一组包含 $m$ 个不等式，有 $n$ 个未知数的形如：

$ \begin{cases} x_{c_1}-x_{c'_1}\leq y_1 \\x_{c_2}-x_{c'_2} \leq y_2 \\ \cdots\\ x_{c_m} - x_{c'_m}\leq y_m\end{cases}$

的不等式组，求任意一组满足这个不等式组的解。

**输入格式**

第一行为两个正整数 $n,m$，代表未知数的数量和不等式的数量。

接下来 $m$ 行，每行包含三个整数 $c,c',y$，代表一个不等式 $x_c-x_{c'}\leq y$。

**输出格式**

一行，$n$ 个数，表示 $x_1 , x_2 \cdots x_n$ 的一组可行解，如果有多组解，请输出任意一组，无解请输出 `NO`。



```C++
#include<bits/stdc++.h>
using namespace std;
int n,m,ans;
int d[5005];
struct node{
	int u,v,w;
}e[5050];
int main(){
	cin>>n>>m;
	for(int i=1;i<=m;i++){
		int c,c2,y;
		cin>>c>>c2>>y;
		e[i].u=c2;e[i].v=c;e[i].w=y;
	
	}
	for(int i=2;i<=n;i++)d[i]=0x3f3f3f3f;
	for(int i=1;i<=n-1;i++){
		for(int j=1;j<=m;j++){
			d[e[j].v]=min(d[e[j].u]+e[j].w,d[e[j].v]);
		}
	}
	for(int i=1;i<=m;i++){
		if(d[e[i].v]>d[e[i].u]+e[i].w){
			printf("NO");return 0;
		}
	}
	for(int i=1;i<=n;i++)cout<<d[i]<<' ';

    return 0;
}
```

## 练习

[www.luogu.com.cn](https://www.luogu.com.cn/problem/P3275)




